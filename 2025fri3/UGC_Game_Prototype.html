. . .（既存コード省略）. . .

  <div class="step" id="step5" style="display:none">
    <h2>⑤ UGCを生むアイデアを考えよう</h2>
    <p>あなたが設計した施策で、どんな投稿や行動が生まれるか、具体的なUGCアイデアを書いてみよう。</p>
    <button class="btn" onclick="toggleHint()">ヒントを見る</button>
    <div id="ugcHint" style="display:none; margin-top:10px; background:#eef; padding:10px; border-radius:5px">
      例：「#推しと◯◯チャレンジ」「限定○○を食べて投稿するとプレゼント」など
    </div>
    <textarea id="ugcIdea" rows="5" style="width:100%; margin-top:10px" placeholder="300文字以内で入力"></textarea>
    <br>
    <button class="btn" onclick="validateUGC()">次へ</button>
  </div>

  <div class="step" id="result" style="display:none"></div>

<script>
function toggleBudget(checkbox){
  const input = document.querySelector(`input[name=budget_${checkbox.value}]`);
  input.disabled = !checkbox.checked;
  if (!checkbox.checked) input.value = '';
}

function nextStep(cur,next){
  document.getElementById('step'+cur).style.display='none';
  document.getElementById('step'+next).style.display='block';
}

function toggleHint(){
  const hint=document.getElementById('ugcHint');
  hint.style.display = hint.style.display === 'none' ? 'block' : 'none';
}

function validateUGC(){
  const idea = document.getElementById('ugcIdea').value.trim();
  if (idea.length === 0 || idea.length > 300) {
    alert('300文字以内でUGCアイデアを入力してください');
    return;
  }
  nextStep(5,6);
}

// スコア計算前にstep5に進むよう変更
function calculateScoreRedirect(){
  nextStep(4,5);
}

const imp={Instagram:300000,TikTok:250000,X:200000,LINE:100000,Shorts:150000};
const cpc={Instagram:35,TikTok:30,X:20,LINE:15,Shorts:25};
const baseCTR={
  'T1|映え|Instagram':1.8,'T1|映え|TikTok':2.0,'T1|コスパ|X':1.6,'T1|スピード|X':1.6,'T1|スピード|LINE':1.6,
  'T2|映え|Instagram':2.0,'T2|映え|TikTok':2.2,'T2|限定性|TikTok':2.0,'T2|参加型|TikTok':2.1,
  'T4|安心感|LINE':1.8,'T4|スピード|LINE':1.6,'T4|コスパ|LINE':1.6,
  'T5|限定性|TikTok':2.0,'T5|推し活|TikTok':2.0,'T5|参加型|TikTok':2.1
};
const creativeBonus={A:1.2,B:1.0,C:0.8};

function calculateScore(){
  // ステップ6用関数、次回追加予定
}
</script>

</body>
</html>
